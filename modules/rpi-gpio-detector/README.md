### Детектор сигнала на GPIO RPi
Этот модуль позволяет активировать Агрегат при возникновении сигнала на одном или нескольких GPIO выходах на микрокомпьютере Raspberry Pi.

Это дает возможность создать вариант Агрегата в виде компьютера Raspberry Pi с подключенными к нему сенсорами.

[Версия 1.1.0](https://bintray.com/artifact/download/uzyovoys/aggregate/com/aggregate/rpi-gpio-detector/1.1.0/rpi-gpio-detector-1.1.0.jar)
[Версия 1.0.0](https://bintray.com/artifact/download/uzyovoys/aggregate/com/aggregate/rpi-gpio-detector/1.0.0/rpi-gpio-detector-1.0.0.jar)

#### Пример
Например, можно собрать систему на базе Raspberry Pi, в которой на определенном GPIO выходе будет подключен датчик приближения. При поднесении руки к датчику Агрегат будет вас слушать, а при убирании руки от датчика Агрегат начнет выполнять распознанную команду.

#### Настройка
Перед установкой модуля создайте файл _rpi-gpio-detector.json_ в директории _conf_. В нем укажите конфигурацию ваших входов и выходов GPIO. Например:

```javascript
{
  "input" : {"GPIO 25" : 1, "GPIO 23" : 0},
  "output" : {"GPIO 24" : 0}
}
```

В поле input вы можете указать список GPIO выходов, которые нужно инициировать определенным образом при запуске Агрегата.
В данном примере на выход 25 будет подан высокий сигнал, а на выход 23 - низкий.
Это поле является опциональным. Если вам не нужно устанавливать какие-то выходы в определенное состояние при запуске Агрегата, то просто не указывайте это поле.

Поле output обязательно. В нем нужно указать те выходы и их состояния, на которые должен среагировать Агрегат и включить распознавание речи.
В данном примере Агрегат будет ждать, когда на выходе 24 появится низкий сигнал (0). Как только сигнал снова изменится, Агрегат закончит распознавание и выполнит распознанную команду.

Вы можете указать несколько выходов и их состояний в поле output. Тогда Агрегат будет включать распознавание только в том случае, если сигналы на всех указанных выходах будут соответствовать указанным в конфигурации уровням.
Как только сигнал хотя бы на одном из выходов снова изменится, Агрегат закончит распознавание и приступит к выполнению распознанной команды.

#### Таймаут
Как сказано выше, Агрегат начнет слушать, как только нужные сигналы появятся на определенных выходах GPIO. И закончит слушать, как только хотя бы один сигнал изменится.

Это поведение можно изменить так, чтобы Агрегат продолжал слушать, если сигнал на выходах продержался меньше определенного времени (таймаута).
Например, для реализации активации распознавания взмахом перед датчиком приближения. Если держать руку долго, то Агрегат слушает, пока вы держите руку над датчиком. Либо можно просто взмахнуть перед датчиком, и Агрегат будет слушать, пока вы не закончите говорить.

Для того, чтобы указать таймаут, пропишите его в файле конфигурации _rpi-gpio-detector.json_

```javascript
{
  "listenTimeout" : 500
}
```

_Таймаут указывается в миллисекундах_

### Список изменений
#### 1.1.0

- Возможность указать таймаут активации
